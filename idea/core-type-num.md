# num type

数字类型一定是一个编程语言的基础类型

而 ivory 的核心数字类型，则可能是 `num`

## what

`num` 总是用分数表示一个数字，即使是整数，在内部也会使用譬如 `6/1` 的方式来表示 `6`

数字字面量会由解释器自动构造对应的 `num` 对象，分母根据小数点后的数位自动以十进制方式进位，分子则保留去除小数点的所有数位

列如 `11.560` 则表示为 `1156/100` ,小数点后数位末尾的 `0` 自动丢弃

然后执行约分，可能使用辗转相除法

~~初步考虑使用两个 `int64` 来分别表示 `num` 的分子和分母~~

## why

自定义数字类型必须要能解决 平台(包括机器和语言) 预实现的数字类型所包含的问题

因为自定义数字类型总是有额外的代价，无论是存储还是计算

根据已验证的方式，通过 `BigInteger` 实现的自定义数字类型，完美实现了以下特性

* 支持无限精度小数
* 没有计算误差
* 不会发生溢出
* 精确表示任何实数

这太酷了！

而且通过优化算法，并从 IL 中寻找可以被优化的指令

该类型的计算速度总是控制在大于 `double` 计算速度的一个数量级以内